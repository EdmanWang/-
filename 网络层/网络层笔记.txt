网络层相关笔记：
1：互连网中网络层设计的思路：
   互连网中网络层只向上提供灵活的，无连接的，尽最大努力交付的数据报服务。网络层不提供服务质量的承诺。网络层是向上层提供ip数据报。
   
2：网际层协议IP:
   2.0：ip地址是32位的，每八位换算成10进制，便于理解和记忆。（点分十进制）

   2.1：虚拟网络链接：
        （1）网络互相连接的的一些中间设备：
		     1：物理层使用的中间设备是叫做：转发器。
			 2：数据链路层使用的中间设备叫做：网桥（桥接器）（交换机）。
			 3：网络层使用的中间设备叫做：路由器。
			 4：在网络层以上使用的中间设备叫做：网关。
			 
			 当中间设备是（物理层）转发器或者是（数据链路层）网桥的时候，这只是把一个网络扩大了一些，从网络层的角度上去看这还是一个网络，一般并不能称为网络互联，目前讨论的网络互联的时候，往往是使用路由器进行的路由选择和网络互联。
			 
	2.2：分类的ip地址：
	    （1）ip地址及其表示方法：
		     1：解释ip ---> 整个互联网是一个单一的，抽象的网络，ip地址就是给互联网上的每一台主机（或者路由）的每一个接口分配一个在全世界范围内唯一的32位标识符。
		（2）网络号和主机号：
		     1：网络号 ---> 网络号标志着主机或者路由器连接到的网络。
			 2：主机号 ---> 主机号标志着该主机或者路由器。
		（3）点分十进制计法：
	
	2.3：常用的三种类别的ip地址：
	
	2.4：IP地址的几个重要特点：
	    （1）每一个ip地址都是由网络号和主机号组成。
		（2）实际上ip地址就是标志一台主机（或者路由器）和一条链路的接口。
		（3）按照互联网的观点，一个网络是指具有相同的网络号（net-id）主机的集合，因此用转发器或者网桥连接起来的若干个局域网依然是一个网络，因为这些局域网都具有相同的网络号，具有不同网络号的局域网必须使用路由器进行连接。
		（4）在ip地址中所有分配到的网络号的网络（不管是局域网还是广域网）都是平等的，所谓平等指的是互联网对待每一个ip地址。
		
	2.5：ip地址和硬件地址：
	     （1）：在发送数据的时候，数据是从高层下发到底层，然后才到链路上去传输，使用ip地址的ip数据报一旦交给了数据链路层，就会被封装成MAC祯。MAC祯在传送时使用的源地址和目的地址都是用硬件地址，这两个硬件地址都是装载mac地址的首部中。
		 （2）：连接在通信链路上的设备（主机或者是路由器）在收到mac祯的时候，会根据mac祯的首部中的硬件地址决定收下或者丢弃。只有在剥去mac祯的首部和尾部之后把mac层的数据上交到网络层后，网络层才在ip数据报中的首部找到源ip地址和目的ip地址。
		 
		 总结：ip地址和硬件地址  ---> 【ip地址是放在ip数据报中的首部，而硬件地址是放在mac祯的首部，网络层和网络层以上是使用ip地址，而数据链路层及其以下则是使用硬件地址】
	
	2.6：地址解析协议【ARP】---> [具体ARP协议分析请看截图---【ARP地址解析协议】]
	    0：每一台主机都设有一个ARP高速缓存，里面有本局域网上各个主机的路由器的ip地址到硬件地址的映射表 1：作用：在已经知道了一台机器（主机或者路由器）的ip地址，需要找到其对应的硬件地址，地址解析协议就是用来解决这种问题的。
		2：ARP是解决同一个局域网上的主机或者路由器的ip地址和硬件地址的映射问题。
		3：ARP(地址解析协议)四种典型情况。--->(详情看：使用ARP的四种典型情况)
		   3.1：发送方（主机）和接收方（主机）都在同一个局域网内。
		   3.2：发送方（主机）和接收方（主机）在不同一个局域网内。--（需要经过路由器寻址）
		   3.3：发送方（路由器）和接收方（主机）在同一个局域网内。
		   3.4：发送方（路由器）和接收方（主机）在不同一个局域网内。--（需要经过路由器寻址）
		4：为什么选择ip地址，而不选择mac地址（硬件地址）。
		   由于全世界有着各式各样的网络，他们使用不同的硬件地址，要使这些异构网络能够相互通信必须进行非常复杂的硬件地址转换工作，因此让用户或者用户主机来完成这项工作是几乎不可能的，但是IP编制把这一项复杂的问题解决来。
		5：使用ARP协议发送数据的过程：
		   网络层使用的是ip地址，当数据从源主机【ip: 132.125.32.23】上向目标主机【ip：132.125.123.56】发送ip数据报，首先源主机在本机上的ARP高速缓存中找是否存在目标主机的ip地址，如果找到则根据ip地址找到对应的硬件地址，在数据链路层在ip数据报上添加首部和尾部，将其封装成祯。如果没有在本局域网上找到对应目标主机的ip地址，则通过路由器转发到其他的网络，直到找到目标地址。【注意：局域网上的人一一台主机上会通过ARP广播协议向局域网任意一台主机报送本主机的ip地址和硬件地址，局域网内ARP高速缓存会缓存该局域网内全部机器[路由器或者主机]的ip地址和硬件地址】
		   
	2.7：IP数据报的格式：
	    1：一个ip数据报是由首部和数据两部分组成。首部的前一部分是固定长度（公20字节），是所有ip数据报必须具有的，在首部固定部分的后面有一些可选的字段，其长度是可变得。
		2：ip数据报中固定字段的各字段。
		   2.1：版本 ---> 占四位，指的是ip协议的版本，即：通信双方使用的ip协议版本必须是一致的，目前使用广泛地是IPv4，以后会涉及IPv6。
           2.2：首部长度 ---> 占四位   
		   2.3：区分服务 ---> 占八位
		   2.4：总长度 ---> 单位:字节，总长度为16位。指的是首部和数据之和的长度。
		   2.5：标识 ---> 占16位
		   2.6：标志 ---> 占3位
		   2.7：片偏移 ---> 占13位
		   2.8：生存时间 ---> 占8位
		   2.9：首部校验和 ---> 占16位
		   2.10：源地址 ---> 占32位
		   2.11：目的地址 ---> 占32位
		   
3：IP层转发分组流程：在路由表中每一条路主要是由【目的网络地址和下一跳地址组成】

4：划分子网
    4.1：划分子网：原来两级ip地址存在缺陷，因此推出三级ip地址。
	     两级ip地址： = {网络号：主机号}
		 三级ip地址： = {网络号：子网号：主机号} 子网号是从主机号中借用若干个单位作为子网号。
    4.2：子网掩码：
	    （1）：两级地址的子网掩码：前16个1，后16个0。
		（2）：三级地址的子网掩码：前24个1，后8个0。
	4.3：如何找到对应的子网：
	     进行ip地址与子网掩码的与运算。----> 找到对应的子网
		 例如：ip地址为【145.132.3.12】
		       路由器使用的是三级子网掩码，即【前24个1，后8个0】。
			   两者进行二进制的与运算 ---> 得出 子网是 = 【145.132.1.0】 找到对应子网。
	4.4：分组如何通过子网掩码进行传递（具体请看：截图：分组通过子网掩码找到目的地址）
	
5：构造超网(无分类编址【CIDR】)
    5.1：网络前缀。
	5.2：最长前缀匹配。
	5.3：使用二叉树查找路由表。
	
6：网际控制报文协议【ICMP】。
    6.1：网际控制报文协议的作用：为了更有效的转发ip数据报和提高交付成功的机会，在网络层中使用网际控制报文协议来实现上述的需求。
	6.2：网际控制报文协议属于ip数据报中数据部分中的一部分。
	6.3：ICMP的种类有两种【1：ICMP差错报告报文 2：ICMP询问报文】
	6.4：ICMP的应用实例。
	    （1）：分组网间探测（PING）---> 用来测试两台主机之间的连通性。【PING是应用层直接使用网络层ICMP的一个例子，并没有使用传输层的TCP或者UDP】
		（2）：window使用tracecert , linux使用traceroute  ---> 具体请看截图【ICMP两种使用实例】
		
7：互联网的路由选择协议：

8：路由器的构成：
    8.1：整个路由器主要可以划分两个主要的组成部分；【1：路由选择部分 2：分组转发部分】。
	    （1）：路由选择部分：其核心的是路由处理机，路由选择处理机的任务就是根据所选定的路由选择协议构造出路由表，并且经常性的和其他的路由表交换路由信息。
		（1）：分组转发部分：由三部分组成【1：交换结构 2：输入端口 3：输出端口】 注意此处说的端口指的是硬件端口。
		
9：IPv6相关：
    9.1：IPv6的首部：
	     （1）：更大的地址空间：IPv6把地址从IPv4的32位扩展了4倍。即是：128位
		 （2）：扩展的地址层次结构：
		 （3）：灵活的首部格式：
		 
	9.2：IPv6使用冒号十六进制记法。【即：每一个16位的值用16进制表示】

	
	    
